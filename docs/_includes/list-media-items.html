<div class="media-list" id="media-{{ include.type | slugify }}"> 

    {% comment %} 
    Ugh. This should be handled with some kind of list
    or lookup and not be hardcoded.
    {% endcomment %}
    {% assign isactive = "" %}
    {% if include.type == "AllCandidates" %}
        {% assign isactive = "active" %}
    {% endif %}

    {% if include.big-header %}
      <h2 class="inline toggleable {{ isactive }}">{{ include.header }}</h2>
    {% else %}
      <h4 class="inline toggleable {{ isactive }}">{{ include.header }}</h4>
    {% endif %}

    <div class="toggle-content {{ isactive }}">

        {% capture introtext %}
        {% include desc-categories-gross.html
          category=include.type
        %} 
        {% endcapture %}
        {{ introtext | markdownify }}

        <div class="spacer">

            {% assign item-list-sorted = (include.item-list | sort: "PubDate")
              | reverse %}

            {% assign item-count = 0 %}
            {% assign teaser-limit = include.teaser-limit | plus:0 %}

            <ul id="{{ include.race-id | slugify }}-{{ include.type }}"
                class="{{ include.type }}-list {% if teaser-limit == 0 -%}
                togglable{%- endif -%}">

            {% for item in item-list-sorted %}

              <li>
              <a href="{{ item.URL }}">{{ item.Title }}</a>,
              {{ item.Publication }},
              {{ item.PubDate | date: "%B %-d, %Y" }}. 
              {% include embed-media.html 
                url=item.URL  
              %}
              </li>

              {% assign item-count = item-count | plus:1 %}
              {% if item-count == teaser-limit
                    and include.item-list.size > teaser-limit %}
                </ul>
                <ul id="{{ include.race-id | slugify }}-{{ include.type }}-toggle"
                   class="togglable {{ include.type }}-list continue">
              {% endif %}

            {% endfor %}
            </ul>
        </div>
    </div>
</div>
